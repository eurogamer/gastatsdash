{% load humanize %}
<!DOCTYPE html>
<html>
	<head>
	</head>
<body>
	<style>
	body, p{
		font-family: sans-serif;
		text-align: left;
		font-weight: normal;
	}
	td, th {
		padding: 0.3em 1em 0.3em 0.5em;
		vertical-align: top;
	}
	th.src {
    	font-weight: lighter;
	}
	td.num {
    	text-align: right;
	}	

	</style>
    <h1>Traffic Source Analytics </h1>
    <p> 
        Between the period : {{start_date}} - {{end_date}} 
    </p>
    <h2> 
        Traffic Sourcing 
    </h2>
    <p> 
        Shows the number of visitors referred from a specific source and the type of referral (medium). 
    </p>
    <p> 
        Total visitors :  {{totals.visitors}}
        Total pageviews : {{totals.pageviews}} 
    </p>    
    <table>
        <thead>
            <tr class = 'column_header'>
                <th> Source / Medium </th>
                <th> Visitors </th>
                <th> Page Views </th>
                <th> Percentage of Total Visitors </th>
                <th> Percentage of Total Pageviews </th>
            </tr>
        </thead>
        <tbody>
            {% for source in compound_list %}
                <tr>
                    <td class = 'src'> {{source.0}} </td>
                    <td class = 'num'> {{source.1.0|intcomma}} </td>
                    <td class = 'num'> {{source.1.1|intcomma}} </td>
                    <td class = 'num'> {{source.1.0|as_percentage_of:totals.visitors}} </td>
                    <td class = 'num'> {{source.1.1|as_percentage_of:totals.pageviews}} </td>
            {% endfor %}
        </tbody>
        
    </table>
    <h2> 
        Devices 
    </h2>
    <p>
        Shows the number of visitors using each device, browser and operating system.
    </p>
    <table>
        <thead>
            <tr class = 'column_header'>
                <th> Device Category </th>
                <th> Browser </th>
                <th> Operating System </th>
                <th> Visitors </th>
                <!--<th> Percentage of Visitors </th>-->
            </tr>
        </thead>
        <tbody>
            {% for source in devices_list %}
                <tr>
                    <td class = 'src'> {{source.deviceCategory}} </td>
                    <td class = 'src'> {{source.browser}}</td>
                    <td class = 'src'> {{source.OS}} </td>
                    <td class = 'num'> {{source.visitors|intcomma}} </td>
                    <!--<td class = 'num'> {{source.visitors|as_percentage_of:totals.visitors}} </td>-->
                </tr>
            {% endfor %}
        </tbody>
       
    </table>
    <h2> 
        Social Networks 
    </h2> 
    <p> 
        Shows the number of visitors being referred from social networks.
    </p>
    <p>
        Total Visitors use social networks: {{totals.socials}}
    </p>
    <p>
        Percentage of visitors use social networks: {{totals.socials|as_percentage_of:totals.visitors}}
    </p>
    <table>
        <thead>
            <tr class = 'column_header'>
                <th> Social Network </th>
                <th> Visitors </th>
                <th> Percentage of Visitors </th>
            </tr>
        </thead>
        <tbody>
            {% for source in social_list %}
                <tr>
                    <td class = 'src'> {{source.0}} </td>
                    <td class = 'num'> {{source.1|intcomma}} </td>
                    <td class = 'num'> {{source.1|as_percentage_of:totals.socials}} </td>
                </tr>
            {% endfor %}
        </tbody>
        
    </table>
    
</body>